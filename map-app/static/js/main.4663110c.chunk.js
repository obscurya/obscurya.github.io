(this["webpackJsonpmap-app"]=this["webpackJsonpmap-app"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(54),r=a.n(o),s=a(45),c=a(36),l=a(64),p={points:[],activePoint:{}},m=a(5),d={center:Object(m.d)([30.342656,59.926291]),zoom:12},u=Object(s.b)({points:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINTS":return Object(l.a)({},e,{points:t.payload});case"CLEAR_POINTS":return p;case"SET_ACTIVE_POINT":return Object(l.a)({},e,{activePoint:t.payload});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MAP_VIEW":return t.payload;case"RESTORE_MAP_VIEW":return d;default:return e}}}),v=a(46),h=a(47),b=a(50),E=a(48),f=a(51),O=function(e,t){return{type:"SET_MAP_VIEW",payload:{center:e,zoom:t}}},y=function(){return{type:"RESTORE_MAP_VIEW",payload:null}},N=a(67),P=a(60),w=a(44),g=a(70),j=a(69),V=a(68),A=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(i)))).olmap=null,a}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.olmap=new N.a({target:"map",layers:[new j.a({source:new V.a})],view:new P.a({center:this.props.center,zoom:this.props.zoom}),controls:[new w.a]}),this.olmap.on("moveend",(function(){var t=e.olmap.getView().getCenter(),a=e.olmap.getView().getZoom();JSON.stringify(t)===JSON.stringify(e.props.center)&&a===e.props.zoom||e.props.setMapView(t,a)}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.points.length&&!this.props.points.length?this.olmap.getOverlays().clear():JSON.stringify(e.activePoint)!==JSON.stringify(this.props.activePoint)&&(e.activePoint.name&&(this.olmap.getOverlayById(e.activePoint.id).element.childNodes[0].className="map-marker"),this.props.activePoint.name&&(this.olmap.getOverlayById(this.props.activePoint.id).element.childNodes[0].className="map-marker map-marker-active")),!e.points.length&&this.props.points.length&&this.props.points.forEach((function(e){var a=document.createElement("div");a.className="map-marker",a.innerHTML='<div class="pin"></div><p>'.concat(e.id,"</p>");var n=new g.a({id:e.id,position:Object(m.d)([e.lon,e.lat]),positioning:"center-center",element:a,stopEvent:!1});t.olmap.addOverlay(n)}))}},{key:"render",value:function(){return this.olmap&&(this.olmap.getView().setCenter(this.props.center),this.olmap.getView().setZoom(this.props.zoom)),i.a.createElement("div",{className:"main-map"},i.a.createElement("div",{id:"map",style:{width:"100%",height:"100%"}}))}}]),t}(n.Component),I={setMapView:O,restoreMapView:y},k=Object(c.b)((function(e){return{points:e.points.points,activePoint:e.points.activePoint,center:e.map.center,zoom:e.map.zoom}}),I)(A),S=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"setActivePoint",value:function(e){JSON.stringify(this.props.activePoint)===JSON.stringify(e)?(this.props.setActivePoint({}),this.props.restoreMapView()):(this.props.setActivePoint(e),this.props.setMapView(Object(m.d)([e.lon,e.lat]),17))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"main-table"},i.a.createElement("h2",null,"Points"),i.a.createElement("div",{className:"table"},i.a.createElement("div",{className:"table-header"},i.a.createElement("div",{className:"table-header-item"},"ID"),i.a.createElement("div",{className:"table-header-item"},"Name"),i.a.createElement("div",{className:"table-header-item"},"Lat"),i.a.createElement("div",{className:"table-header-item"},"Lon")),this.props.points.map((function(t,a){return i.a.createElement("div",{className:"table-row".concat(t.id===e.props.activePoint.id?" table-row-active":""),key:a,onClick:function(){return e.setActivePoint(t)}},i.a.createElement("div",{className:"table-row-item"},t.id),i.a.createElement("div",{className:"table-row-item"},t.name),i.a.createElement("div",{className:"table-row-item"},t.lat.toFixed(6)),i.a.createElement("div",{className:"table-row-item"},t.lon.toFixed(6)))}))))}}]),t}(n.Component),M={setActivePoint:function(e){return{type:"SET_ACTIVE_POINT",payload:e}},setMapView:O,restoreMapView:y},T=Object(c.b)((function(e){return{points:e.points.points,activePoint:e.points.activePoint}}),M)(S),_=(a(96),a(97),a(98),a(99),[{id:1,name:"\u041f\u0435\u0442\u0440\u043e\u043f\u0430\u0432\u043b\u043e\u0432\u0441\u043a\u0438\u0439 \u0441\u043e\u0431\u043e\u0440",lat:59.950137,lon:30.316023},{id:2,name:"\u0411\u043e\u0442\u0430\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0430\u0434 \u0421\u041f\u0431\u0413\u0423",lat:59.94148,lon:30.296796},{id:3,name:"\u042d\u0440\u043c\u0438\u0442\u0430\u0436",lat:59.939881,lon:30.314562},{id:4,name:"\u0414\u043e\u043c\u0438\u043a \u041f\u0435\u0442\u0440\u0430 I",lat:59.953326,lon:30.330843},{id:5,name:"\u0421\u0435\u0432\u043a\u0430\u0431\u0435\u043b\u044c \u043f\u043e\u0440\u0442",lat:59.924599,lon:30.241717},{id:6,name:"\u0418\u0432\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439 \u043a\u0430\u0440\u044c\u0435\u0440",lat:59.878167,lon:30.424}]),C=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"clearPoints",value:function(){this.props.clearPoints(),this.props.restoreMapView()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"app"},i.a.createElement("div",{className:"header",onClick:this.clearPoints.bind(this)},i.a.createElement("h1",null,"Map App")),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"side"},i.a.createElement("button",{className:"button",onClick:function(){return e.props.addPoints(_)},disabled:this.props.points.length},"ADD POINTS")),i.a.createElement("div",{className:"main"},i.a.createElement(k,null),i.a.createElement(T,null))))}}]),t}(n.Component),D={addPoints:function(e){return{type:"ADD_POINTS",payload:e}},clearPoints:function(){return{type:"CLEAR_POINTS",payload:null}},restoreMapView:y},z=Object(c.b)((function(e){return{points:e.points.points}}),D)(C),J=(a(100),Object(s.c)(u));r.a.render(i.a.createElement(c.a,{store:J},i.a.createElement(z,null)),document.getElementById("root"))},85:function(e,t,a){e.exports=a(101)},96:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.4663110c.chunk.js.map